#
# ~/.bashrc
#

# If not running interactively, don't do anything
[[ $- != *i* ]] && return

# set default editor 
export EDITOR='nvim'
export VISUAL='nvim'

################# set aliases
# set neovim as replacement for vim
alias vim='nvim'
# set file listing
alias ls='ls --color=auto'
alias ll='ls -lh --color=auto'
alias l.='ls -lah --color=auto'
# set copy to verbose and with overwrite question
alias cp='cp -vi'
# set remove to a false command 
# alias rm='echo "This is not the command you are looking for."; false'
alias remove='rm'
alias rm='rm --preserve-root -iv'
alias del='trash-put'
# set move to verbose and with overwrite question
alias mv='mv -vi'
# set grep to have nice colors
alias grep='grep --color=auto'
# volume controls using wireplumber
alias vol='wpctl set-volume @DEFAULT_AUDIO_SINK@'
alias volget='wpctl get-volume @DEFAULT_AUDIO_SINK@'
# flameshot screenshot grabber
alias fl='flameshot gui --path ~/Pictures/screenshots/'

PS1='[\u@\h \W]\$ '

# set ctrl-y to copy current line in terminal
if [[ -n $DISPLAY ]]; then
  copy_line_to_x_clipboard () {
    printf %s "$READLINE_LINE" | xclip -selection CLIPBOARD
  }
  bind -x '"\C-y": copy_line_to_x_clipboard' # binded to ctrl-y
fi

# combine history between terminals
# Avoid duplicates
HISTCONTROL=ignoredups:erasedups
# When the shell exits, append to the history file instead of overwriting it
shopt -s histappend

# After each command, append to the history file and reread it
PROMPT_COMMAND="${PROMPT_COMMAND:+$PROMPT_COMMAND$'\n'}history -a; history -c; history -r"

# Set up starship
eval "$(starship init bash)"

# Set up fzf key bindings and fuzzy completion
eval "$(fzf --bash)"

# Set up zoxide key bindings and fuzzy completion
eval "$(zoxide init --cmd j bash)"
# set vi mode in bash
set -o vi

# SHOPTS AUTOSTARTS
shopt -s cdspell
shopt -s autocd

# setup fzf-command-bookmarks
source /home/jex/.scripts/fzf-command-bookmarks.sh
